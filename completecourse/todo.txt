// TODO: after updates are made, how will the "completion tracking" cope with toc indexes having changed numbers? [internal id's generated by the converter?]
// TODO: wide images don't fit in the zoomed popup
// TODO: make all images the same scale??
// TODO: when scrolling through content, check off sections that might not have triggered the usual "completed" scrolling trigger (ie, check for sequential completions)
// TODO: short sub-sections don't get marked complete
// TODO: tighten up TOC look and feel (maybe: a's without tree-toggler don't have to be padded so far to the right)
// TODO: the Unleashed CSS causes an ugly scrolling jump when a new iframe section is loaded via infinite scrolling

////////////////////////////////////////////////////////////////////////////

// DONE: get sample course to load and work correctly on InformIT the same way the test page does
// DONE: make the same code work locally and on InformIT
// DONE: multiple test courses in subfolders under "completecourse"?
// DONE: expand/collapse button is no longer working
// DONE: tag new content and process via converter (.rr-updated and .rr-update)
// DONE: shouldn't images be zoomable?
// DONE: better tracking of the TOC via headers
// DONE: check to see Habitat output headers can be tracked in the TOC for scrolling purposes
// DONE: add a "previous section" button/header
// DONE: make the previous button return the first section with the new src (as opposed to the last section with that new src)
// DONE: re-implement TOC searching
// TODONT: Habitat external resource upload (or just link) capability [link to S3]
// TODONT: test server options? (completecourse folder?) [completecourse]
// DONE: implement content searching (using pre-created index, ala HCW, using lunr)
// DONE: finish searching and refactor the loading of the index file (as .json, preferably?) [left it as .js for simplicity]
// DONE: when switching to new sections via an anchor, it doesn't actually take you to the anchor [line was commented out?!]
// DONE: handle not finding a search_index.js
// DONE: instead of using metadata, build a new flattened metadata with short "depth" labels, etc.
// DONE: put searching back in for videos [titles without search index]
// DONE: fall-back to other video formats (or does VideoJS do this automatically?)
// DONE: for videos, don't mark complete when switching (it does that now for text content, for lack of "scroll checking")
// DONE: (video) open with a title screen
// DONE: "short" labels for Habitat content look wrong now (see: Unleashed; video conversion artifact?)
// DONE: put chapter identifier in search result
// DONE: refactor TOC to add container for both regular TOC and search results?
// DONE: only mark child objects "started" (so parents don't mark their children)
// DONE: don't scroll search results (if they're visible)
// DONE: responsive: show/hide full-screen
// DONE: when xs and toc is clicked, hide toc
// DONE: responsive: do something with search and account buttons and hide project text
// DONE: Safari browser compatibility (video poster centering) [-wekbit prefix]
// DONE: collapse all button not working
// DONE: full-text searching: close search, # of hits
// DONE: start with table of contents collapsed
// DONE: load and display from CodeMantra (?) ePub
// DONE: test CodeMantra epub on S3 [check] and then InformIT [OEBPS needs to be lowercase]
// DONE: toc clicks and link clicks add to browser history [maybe not link clicks]
// DONE: jumping to a link from within a CodeMantra ePub works but then scrolls to the top of the new page
// DONE: for ePubs, make sure it can track sections [h4 too]
// DONE: make identification of current section visually nicer-looking
// DONE: change history during scrolling of sections
// DONE: finish styling full-text search UI (re-do search, prev/next hit)
// DONE: store localStorage data separately for each title (because localStorage is shared by domain)
// DONE: Google Analytics [I think so]
// DONE: designate start page for ePub? [hand edit]
// DONE: when scrolling, expand TOC for current section, if hidden
// DONE: if a TOC entry has no number, it's not expandable (like the Prologue) [clicking on entry expands it]
// DONE: search isn't grabbing the right text (ex: ch08lev1sec3 should be Working with Chat Hangouts, and not include the text "Admin Console") [n-1 problem, I think]
// DONE: setSearchIndex is being called before TOCTree is initialized [not seeing this anymore; localStorage issue?]
// DONE: expanding/collapsing arrows get confused (by auto-expanding)
// DONE: clicking on Index doesn't jump to the index page [iframe links don't set the iframe's src]
// DONE: bug when clicking on Chapter 7, then Index, links do not work, page just jumps [try not unloading the iframe?] [does not happen in Safari!] [iFrame with hash causes jumping in Chrome]
// DONE: when scrolling, look for sections in the current file to sync (not everywhere, in case section names are duplicated)
// DONE: search result toc #s should match the chapter numbers (not internal numbers)
// DONE: make default font sans
// DONE: highlight search term on page, with next/prev button in search box
// DONE: auto-expanding the TOC doesn't seem to work (on server) [seems ok]
// DONE: (BUG) new Habitat projects open to video page at first (? localStorage bug?) [seems ok]
// DONE: replace the timeout in iframe-holder's height checking with imagesLoaded, etc to avoid the height flicker/readjustment
// DONE: make ePub images clickable
// DONE: next/prev in search use the currently selected item (if any)
// DONE: item completion should be visible for "parent" items too (esp. videos) [still not crazy about the toc styling]
// DONE: click toc heading toggles it [might get overridden by auto-opening based on content scrolling]
// DONE: completion of parent in TOC is only checked if all children have been checked [cosmetic only; each section can be complete but displays half-complete symbol until all children are complete]
// DONE: clicking on TOC headings still toggles incorrectly sometimes [VideoManager.syncTOCToContent opens current content]
// DONE: for epubs, load toc from tocncx.html (instead of toc.ncx) because Firefox refused to follow the redirect [302 status: "moved"]
// DONE: external links need to be NOT overridden
// DONE: demo updated/changed content for Greg [deleted content = rollover to see; deleted chapter; change log]
// TODONT: send page title to Google Analytics (not link #) [it's there: Secondary dimension: Screen Name]
// DONE: max-width for iframe for better readability?
// DONE: better way to grab numbers for the TOC
// DONE: spell out the TOC numbering strategies for various styles/skins (data loading, toctree; habitat, epub, CIB skin) [Google Doc]
// DONE: sizing of Habitat content with quizzes/widgets isn't correct (CIB InDesign 1.5)
// DONE: widgets that resize the page need to be accounted for (CIB InDesign 18.7.1)
// DONE: xs needs a very small margin
// DONE: xs isn't set when first loaded
// DONE: smoother visual transition to new pages
// DONE: visual indicator that a page is loading
// DONE: download option for video toc entries
// DONE: hide codeMantra "click here to view the code" links
// DONE: visual indicator that a TOC entry has children
// DONE: toggling dropper when selecting an entry isn't working
// DONE: add optional closed captioning file to the toc.js
// DONE: where did the video BackButton go? (lost with change away from video.dev.js?) [yes]
// DONE: search for video has a bug? [Web Editions UI]
// DONE: zipfile downloading for video, best method? [iframe with file as src, downloads automatically]
// DONE: videos don't seem to be marking as "complete" [2nd level with short labels; moved completion marks to absolute, right of description (might overlap download buttons sometimes)]
// DONE: resize quiz iframes after loading [min-height = window height]
// DONE: make quiz iframes go away when clicking on another section
// DONE: event for Captivate quiz being completed? [found a way to get the % score of the quiz]
// DONE: track download link clicks
// DONE: new TOC styling: can hanging indents work?
// INFO: to preview a web edition, use this URL: https://memberservices.informit.com/my_account/webedition/[isbn]/html/index.html
// DONE: in new TOC: completion buttons are overlapping (or being loaded too many times)
// DONE: in both old and new TOC stylings: download button click area is way too big [default functionality of a label element; switched to a div]
// DONE: video title header TOC entries without video should be obvious [made them toggle the section]
// DONE: non-video header TOC entries should not be completed (until children are all completed) [need to test if children completing it works]
// DONE: added breakout_of_frame to avoid iframe scrolling issues on iPad (and possibly other issues)